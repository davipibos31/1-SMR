"use strict";(function (Unicode,go,$){Unicode.Side.List=go.Class([go.Ext.Nodes],{'nodes':{'uls':{'selector':"ul",'events':{click:"onClickList"}}},__construct:function __construct(side,node){this.initNodes(node);this.side=side;this.expanded=false;this.selectBlock("control-character");$(window).click(this.onClickWindow);},__destruct:function __destruct(){this.doneNodes();},expand:function expand(){if (!this.expanded){this.node.show();this.expanded=true;}},collapse:function collapse(){if (this.expanded){this.node.hide();this.expanded=false;}},toggle:function toggle(){if (this.expanded){this.collapse();}else{this.expand();}},getBlockByKey:function getBlockByKey(key){var block=this.getAllBlocks()[key];if (!block){return null;}return this.fillBlock(block);},onClickList:function onClickList(e){var node=e.target,block,key;if (node.tagName !=="A"){return;}e.preventDefault();key=node.getAttribute("data-key");if (!key){return;}block=this.getBlockByKey(key);this.collapse();this.side.onSelectBlock(block);},getBlockByCode:function getBlockByCode(code){var blocks=this.getAllBlocks(),block,key;for (key in blocks){if (blocks.hasOwnProperty(key)){block=this.fillBlock(blocks[key]);if ((block.beginDec <=code) && (block.endDec >=code)){return block;}}}return null;},selectBlock:function selectBlock(key){if (this.current){this.fillParentBlock(this.current);this.current.parent.removeClass("selected");this.current=null;}this.current=this.getBlockByKey(key);if (this.current){this.fillParentBlock(this.current);this.current.parent.addClass("selected");}},onClickWindow:function onClickWindow(e){if (e.originalEvent._sideClick){return;}if (this.expanded){this.collapse();}},getAllBlocks:function getAllBlocks(){var blocks,block,nodes,node,key,len,i;if (!this.blocks){blocks={};nodes=this.nodes.uls.find("A");for (i=0,len=nodes.length;i < len;i +=1){node=nodes.eq(i);key=node.attr("data-key");block={'key':key,'node':node};blocks[key]=block;}this.blocks=blocks;}return this.blocks;},fillBlock:function fillBlock(block){var node;if (typeof block.url==="undefined"){node=block.node[0];block.begin=node.getAttribute("data-begin");block.end=node.getAttribute("data-end");block.beginDec=parseInt(block.begin,16);block.endDec=parseInt(block.end,16);block.url=node.getAttribute("href");block.name=block.node.text();}return block;},fillParentBlock:function fillParentBlock(block){if (!block.parent){block.parent=block.node.parent();}return block;},'eoc':null});})(Unicode,go,jQuery);