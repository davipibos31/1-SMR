if (!window.go){throw new Error("go.core is not found");}go.module("Class",null,function (go,global){"use strict";var Class,RootPrototype,ClassCreator,MutatorsList;RootPrototype={'go$type':"go.object",'__classname':"go.Class.Root",'__abstract':true,'__final':false,'__construct':function (){},'__destruct':function (){},'__parentConstruct':function (Parent){var args=Array.prototype.slice.call(arguments);args[0]=this;Parent.__construct.apply(Parent,args);},'__parentDestruct':function (Parent){Parent.__destruct(this);},'__parentMethod':function (Parent){var args=Array.prototype.slice.call(arguments);args[0]=this;return Parent.__method.apply(Parent,args);},'destroy':function (){var k;if (this.__destroyed){return;}this.__destruct();for (k in this){if (this.hasOwnProperty(k)){this[k]=undefined;}}this.__destroyed=true;},'instance_of':function (C){if ((typeof C==="function") && (this instanceof C)){return true;}return this.__self.isSubclassOf(C);},'toString':function (){var classname=this.__self ? this.__self.__classname:"undefined";return "instance of [" + classname + "]";},'__mutators':{'sysvars':{'vars':{'__abstract':false,'__final':false,'__classname':"go.class"},'processClass':function (props){var C=this.Class,vars=this.vars,name;for (name in vars){if (vars.hasOwnProperty(name)){if (props.hasOwnProperty(name)){C[name]=props[name];delete props[name];}else{C[name]=vars[name];}}}delete props.eoc;}},'static':{'processClass':function (props){var C=this.Class,st=props.__static,fields,k;fields=this.fields;if (st){go.Lang.extend(fields,st);delete props.__static;}for (k in fields){if (fields.hasOwnProperty(k)){C[k]=fields[k];}}}},'bind':{'regexp':/^on[A-Z_]/,'bindvar':"__bind",'processClass':function (props){var names=this.getMethodsNames(props),fields=this.fields,i,len,name,fn;for (i=0,len=names.length;i < len;i +=1){name=names[i];fn=props[name];if (typeof fn==="function"){delete props[name];fields[name]=fn;}}},'processInstance':function (instance){var bind=go.Lang.bind,fields=this.fields,original,binded,k;for (k in fields){if (fields.hasOwnProperty(k)){original=fields[k];binded=bind(original,instance);binded.__original=original;instance[k]=binded;}}},'getMethod':function (name,instance){if (this.fields.hasOwnProperty(name)){return go.Lang.bind(this.fields[name],instance);}return undefined;},'getMethodsNames':function (props){var names,k,reg=this.regexp;if (props.hasOwnProperty(this.bindvar)){names=props[this.bindvar];if (!names){names=[];}delete props[this.bindvars];}else{names=[];for (k in props){if (props.hasOwnProperty(k)){if (typeof props[k]==="function"){if (reg.test(k)){names.push(k);}}}}}return names;}}}};ClassCreator=function (parents,props){this.__construct(parents,props);};ClassCreator.prototype={'constructor':ClassCreator,'__construct':function (parents,props){if (!props){props=parents;parents=null;}this.props=props;this.cparents=parents;},'__destruct':function (){},'create':function (){this.createClass();this.separateParents();if (!this.checkParentsNoFinal()){throw new Class.Exceptions.Final();}this.createPrototype();this.createMutators();this.applyOtherParents();this.fillClass();},'getClass':function (){return this.Class;},'createClass':function (){var C=function (){if (C.__abstract){throw new Class.Exceptions.Abstract();}if ((!(this instanceof C)) || (this.hasOwnProperty("__destroyed"))){var instance=new C.__Fake();C.apply(instance,arguments);return instance;}C.__fillInstance(this);this.__destroyed=false;this.__construct.apply(this,arguments);};C.__props=this.props;this.Class=C;},'separateParents':function (){var cparents=this.cparents,C=this.Class;if (!cparents){C.__parent=null;C.__otherParents=[];}else if (typeof cparents==="function"){C.__parent=cparents;C.__otherParents=[];}else{C.__parent=cparents[0];C.__otherParents=cparents.slice(1);}if ((!C.__parent) && Class.Root){C.__parent=Class.Root;}},'checkParentsNoFinal':function (){var i,len,parents,parent,C=this.Class;if (C.__parent && C.__parent.__final){return false;}parents=C.__otherParents;for (i=0,len=parents.length;i < len;i +=1){parent=parents[i];if (typeof parent==="function"){if (parent.__final){return false;}}}return true;},'createPrototype':function (){var C=this.Class;if (C.__parent){C.prototype=new C.__parent.__Fake();}else{C.prototype={};}C.prototype.constructor=C;C.prototype.__self=C;},'createMutators':function (){var C=this.Class,mutators=new MutatorsList(C);C.__mutators=mutators;mutators.create();},'applyOtherParents':function (){var oparents=this.Class.__otherParents,proto=this.Class.prototype,parent,i,len,k;for (i=0,len=oparents.length;i < len;i +=1){parent=oparents[i];if (typeof parent==="function"){parent=parent.prototype;}if (parent){for (k in parent){if (proto[k]===undefined){proto[k]=parent[k];}}}}},'fillClass':function (){var C=this.Class,props=go.Lang.copy(this.props);C.go$type="go.class";C.__Fake=function (){};C.__Fake.prototype=C.prototype;go.Lang.extend(C,this.classMethods);C.toString=this.classMethods.toString;C.__mutators.processClass(props);go.Lang.extend(C.prototype,props);},'Class':null,'props':null,'cparents':null,'classMethods':{'isSubclassOf':function (wparent){var i,len,other,oparent;if (wparent===this){return true;}if (!this.__parent){return false;}if (this.__parent.isSubclassOf(wparent)){return true;}other=this.__otherParents;for (i=0,len=other.length;i < len;i +=1){oparent=other[i];if (wparent===oparent){return true;}if (typeof oparent.isSubclassOf==="function"){if (oparent.isSubclassOf(wparent)){return true;}}if (typeof wparent==="function"){if (oparent instanceof wparent){return true;}}}return false;},'__construct':function (instance){var args=[instance,"__construct"];args=args.concat(Array.prototype.slice.call(arguments,1));this.__method.apply(this,args);},'__destruct':function (instance){this.__method.call(this,instance,"__destruct");},'__method':function (instance,name){var args=Array.prototype.slice.call(arguments,2),fn=this.prototype[name],message;if (!fn){fn=this.__mutators.getMethod(name,instance);if (!fn){message="Method " + name + " is not found";throw new Class.Exceptions.Method(message);}}return fn.apply(instance,args);},'__fillInstance':function (instance){this.__mutators.processInstance(instance);},'toString':function (){return "class [" + this.__classname + "]";}},'eoc':null};MutatorsList=function (C){MutatorsList.prototype.__construct(C);};MutatorsList.prototype={'constructor':MutatorsList,'Class':null,'mutators':null,'__construct':function (C){this.Class=C;},'create':function (){this.mutators={};this.createDirectLine();this.mergeColBranch();},'processClass':function (props){var mutators=this.mutators,k;delete props.__mutators;for (k in mutators){if (mutators.hasOwnProperty(k)){if (mutators[k]){mutators[k].processClass(props);}}}return props;},'processInstance':function (instance){var mutators=this.mutators,k;for (k in mutators){if (mutators.hasOwnProperty(k)){if (mutators[k]){mutators[k].processInstance(instance);}}}},'getMethod':function (name,instance){var mutators=this.mutators,k,method;for (k in mutators){if (mutators.hasOwnProperty(k)){method=mutators[k].getMethod(name,instance);if (method){return method;}}}},'createDirectLine':function (){var C=this.Class,mutators=this.mutators,mprops=C.__props.__mutators ||{},mparents=C.__parent ? C.__parent.__mutators.mutators:{},k,mutator;for (k in mparents){if (mparents.hasOwnProperty(k)){mutator=mparents[k];if (mprops.hasOwnProperty(k)){if (mprops[k]){mutators[k]=this.extendMutator(k,mutator,mprops[k],C.__parent);}else{mutators[k]=null;}}else{mutators[k]=this.copyMutator(k,mutator,C.__parent);}}}for (k in mprops){if (mprops.hasOwnProperty(k)){if (!mutators.hasOwnProperty(k)){if (mprops[k]){mutators[k]=this.createNewMutator(k,mprops[k]);}else{mutators[k]=null;}}}}},'mergeColBranch':function (){var oparents=this.Class.__otherParents,oparent,mutators=this.mutators,pmutators,len=oparents.length,i,k;for (i=0;i < len;i +=1){oparent=oparents[i];if (typeof oparent==="function"){pmutators=oparent.__mutators && oparent.__mutators.mutators;if (pmutators){for (k in pmutators){if (pmutators.hasOwnProperty(k)){if (!mutators.hasOwnProperty(k)){mutators[k]=this.copyMutator(k,pmutators[k],oparent);}}}}}}},'createNewMutator':function (name,props,bproto,parent){var Fake,proto,Constr;Fake=function (){};Fake.prototype=bproto || this.Mutator.prototype;proto=new Fake();go.Lang.extend(proto,props);Constr=function (name,C,parent){this.__construct(name,C,parent);};Constr.prototype=proto;proto.constructor=Constr;return new Constr(name,this.Class,parent);},'extendMutator':function (name,mparent,props,parent){return this.createNewMutator(name,props,mparent.constructor.prototype,parent);},'copyMutator':function (name,mparent,parent){return new mparent.constructor(name,this.Class,parent);},'Mutator':(function (){var Mutator=function (name,C,parent){this.__construct(name,C,parent);};Mutator.prototype={'name':null,'Class':null,'parent':null,'fields':null,'__construct':function (name,C,parent){this.name=name;this.Class=C;this.fields={};this.parent=parent;this.loadFromParents();},'processClass':function (props){return props;},'processInstance':function (instance){return instance;},'getMethod':function (){},'loadFromParents':function (){var C=this.Class,parent=C.__parent,oparents=C.__otherParents,oparent,i;for (i=oparents.length - 1;i >=0;i -=1){oparent=oparents[i];if ((typeof oparent==="function") && oparent.go$type){this.loadFromSingleParent(oparent);}}if (parent){this.loadFromSingleParent(parent);}},'loadFromSingleParent':function (parent){var mutators=parent.__mutators;if (!mutators){return;}mutators=mutators.mutators;if (mutators.hasOwnProperty(this.name)){go.Lang.extend(this.fields,mutators[this.name].fields);}},'eoc':null};Mutator.prototype.constructor=Mutator;return Mutator;}()),'eoc':null};Class=function Class(parents,props){var creator,C;creator=new ClassCreator(parents,props);creator.create();C=creator.getClass();creator.__destruct();return C;};Class.Root=Class.apply(global,[null,RootPrototype]);Class.Root.prototype.toString=RootPrototype.toString;Class.Exceptions=new go.Lang.Exception.Block({'Abstract':[true,"Cannot instantiate abstract class"],'Final':[true,"Cannot extend final class"],'Method':[true,"Method is not found"]},"go.Class.Exceptions");return Class;});