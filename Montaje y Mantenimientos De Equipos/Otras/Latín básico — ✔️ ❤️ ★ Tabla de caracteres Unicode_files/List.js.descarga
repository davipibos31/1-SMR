"use strict";(function wrap(Unicode,go,$){Unicode.List=go.Class([go.Ext.Events],{NODE_LOADING:"#loading",BOTTOM_BLOCK_NUM:null,__construct:function __construct(node,scroll,offsetTop){this.BOTTOM_BLOCK_NUM=Unicode.Config.BLOCKS_COUNT - 1;this.node=$(node);this.scroll=scroll;this.blocks=new Unicode.Blocks(this.node,this,(offsetTop || 0));this.loading=new Unicode.Loading(this,$(this.NODE_LOADING),this.blocks.getLastBlock());},__destruct:function __destruct(){this.blocks.destroy();this.loading.destroy();},moveToBlock:function moveToBlock(begin){this.moveToSymbol(begin);},moveToSymbol:function moveToSymbol(code){return this.blocks.moveToSymbol(code,this.scroll);},highlightBlock:function highlightBlock(begin,end){this.highlightBlockOff();this.blocks.highlightBlock(begin,end);},highlightBlockOff:function highlightBlockOff(){this.blocks.highlightBlockOff();},onSelectSymbol:function onSelectSymbol(e){this.fireEvent(e);},onWindowScroll:function onWindowScroll(e){this.blocks.onWindowScroll(e);},onCreateBlock:function onCreateBlock(block){var prev=this.blocks.getPrevBlock(block);if (prev){if (prev.num===block.num - 1){block.node.insertAfter(prev.node);this.loadingMove(prev,block);}else{block.node.insertAfter(this.loading.nodes[prev.num]);this.loadingAfterBlock(block);}}else{this.node.prepend(block.node);this.loadingAfterBlock(block);}},loadingAfterBlock:function loadingAfterBlock(block){var loading;if (block.num >=this.BOTTOM_BLOCK_NUM){return null;}if (this.blocks.blocks[block.num + 1]){return null;}loading=this.loading.create(block.num);loading.insertAfter(block.node);return loading;},loadingMove:function loadingMove(from,to){if (to.num >=this.BOTTOM_BLOCK_NUM){this.loading.remove(from.num);return null;}if (this.blocks.blocks[to.num + 1]){this.loading.remove(from.num);return null;}return this.loading.move(from.num,to.num);},loadingRemove:function loadingRemove(block){this.loading.remove(block.num);}});})(Unicode,go,jQuery);