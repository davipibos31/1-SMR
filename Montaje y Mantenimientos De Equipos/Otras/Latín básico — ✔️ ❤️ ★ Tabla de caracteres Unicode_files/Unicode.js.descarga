"use strict";var Unicode=(function wrap(go,document,window){var Unicode=go.Class([go.Ext.Nodes],{nodes:{list:".unicode_div",ruler:".table-header",side:".side",symbol:".char",popular:".popular",top:".go-top"},__construct:function __construct(node){this.initNodes(node);this.createObjects();this.fixed=false;this.currentBlock=null;this.highlightedBlock=null;},onloadInit:function onloadInit(){this.scroll.scroll(0);this.initEvents();this.currentBlock=this.side.selectBlockByCode(0);this.checkFixed(this.scroll.getTop());this.initStage=true;this.checkLocation();this.initStage=false;this.toup=false;},__destruct:function __destruct(){this.doneObjects();this.doneNodes();},createObjects:function createObjects(){var RULER_OFFSET=40,nodes=this.nodes,height;this.scroll=new Unicode.Scroll();this.ruler=new Unicode.Ruler(nodes.ruler);height=this.ruler.height + RULER_OFFSET;this.list=new Unicode.List(nodes.list,this.scroll,height);this.side=new Unicode.Side(nodes.side);this.symbol=new Unicode.Symbol(nodes.symbol);this.popular=new Unicode.Popular(nodes.popular);this.location=new Unicode.Location();},doneObjects:function doneObjects(){this.list.destroy();this.ruler.destroy();this.side.destroy();this.symbol.destroy();this.popular.destroy();this.scroll.destroy();},initEvents:function initEvents(){this.scroll.addEventListener("scroll",this.onScrollWindow);this.list.addEventListener("selectSymbol",this.onSelectSymbol);this.popular.addEventListener("selectPopular",this.onSelectPopular);this.side.addEventListener("selectBlock",this.onSelectBlock);this.side.addEventListener("clickRange",this.onClickBlockRange);this.location.addEventListener("changeHash",this.onChangeLocation);this.nodes.top.bind("click",this.onClickUp);},onScrollWindow:function onScrollWindow(e){var current=this.currentBlock,line;this.checkFixed(e && e.data.top);this.symbol.onWindowScroll();this.list.onWindowScroll(e);line=0 + this.list.blocks.currentLine;if ((!current) || (line < current.beginDec) || (line > current.endDec)){this.currentBlock=this.side.selectBlockByCode(line);if (this.currentBlock){this.location.setHash(this.currentBlock.key);}}},isSmartphone:function (){return window.matchMedia("(max-width:1023px)").matches;},onSelectSymbol:function onSelectSymbol(e){this.symbol.select(e.data.code,e.data.node);this.location.setHash(Unicode.Helper.dec2hex(e.data.code));},onSelectPopular:function onSelectPopular(e){this.symbol.select(e.data.code,e.data.node);},onSelectBlock:function onSelectBlock(e){var begin=Unicode.Helper.hex2dec(e.data.begin),end=Unicode.Helper.hex2dec(e.data.end);this.location.setHash(e.data.key);this.list.moveToBlock(begin,end);this.checkFixed(this.scroll.top);if (!this.initStage){this.onClickBlockRange(e);}},onClickBlockRange:function onClickBlockRange(e){if (e.data===this.highlightedBlock){this.list.highlightBlockOff();this.highlightedBlock=null;}else{this.list.highlightBlock(e.data.beginDec,e.data.endDec);this.highlightedBlock=e.data;}},onChangeLocation:function onChangeLocation(e){this.checkLocation(e.data.hash);},fix:function fix(){this.fixed=true;this.node.addClass("fixed");},unfix:function unfix(){this.fixed=false;this.node.removeClass("fixed");},checkFixed:function checkFixed(top){if (!this.isSmartphone()){if (top > this.ruler.top){if (!this.fixed){this.fix();}}else if (this.fixed){this.unfix();}}else{if (top > $('.unicode').offset().top){if (!this.fixed){this.fix();}}else if (this.fixed){this.unfix();}}},checkLocation:function checkLocation(hash){this.side.collapseList();if (typeof hash==="undefined"){hash=this.location.getHash();if (this.initStage && (hash==="control-character")){return false;}}if (!hash){return false;}if (this.checkLocationSymbol(hash)){if (!this.fixed){this.fix();}return true;}if (this.checkLocationBlock(hash)){return true;}return false;},checkLocationSymbol:function checkLocationSymbol(hash){var code,node;if (!(/^1?[a-fA-F0-9]{1,4}$/).test(hash)){return false;}code=Unicode.Helper.hex2dec(hash);this.location.setHash(Unicode.Helper.dec2hex(code));node=this.list.moveToSymbol(code);this.symbol.select(code,node);return true;},checkLocationBlock:function checkLocationBlock(hash){return this.side.trySelectBlock(hash);},onClickUp:function onClickUp(){if (this.toup){return;}if (!this.scroll.disableForUp()){return;}this.toup=true;$("html,body").animate({scrollTop:0},{duration:500,complete:this.onCompleteUp});},onCompleteUp:function onCompleteUp(){this.toup=false;this.location.setHash("",true);this.scroll.enableAfterUp();}});Unicode.Config=window.UnicodeConfig;window.UnicodeConfig=null;var emojiList=import('./data/emoji_list.js');emojiList.then(module=>{Unicode.emojiList=module.get();});return Unicode;})(go,document,window);